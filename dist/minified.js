let pokeList=document.querySelector(".pokemon-list"),pokemonRep=(()=>{let e=[],t=t=>{"object"==typeof t?e.push(t):console.log("Not a valid data type")},a=e=>{o(e).then(()=>{i(e),console.log(e)})},o=async e=>{const t=e.detailsUrl;try{let a=await fetch(t),o=await a.json();e.id=o.id,e.name=o.name,e.imageUrl=o.sprites.other["official-artwork"].front_default,e.height=o.height/10+" m",e.weight=o.weight+" kgs",e.types=[],o.types.forEach(t=>{e.types.push(t.type.name)}),e.abilities=[],o.abilities.forEach(t=>{e.abilities.push(t.ability.name)});const i=`https://pokeapi.co/api/v2/pokemon-species/${e.id}`;try{a=await fetch(i),o=await a.json(),e.specie=o.genera[7].genus;const t=o.flavor_text_entries.filter(e=>"en"===e.language.name);e.description=t[t.length-1].flavor_text.replace(/[\n \f]/g," ")}catch(e){console.error(e)}}catch(e){console.error(e)}};document.createElement("div").setAttribute("id","modal-container");const i=e=>{e.detailsUrl;let t=$(".modal-body"),a=$(".modal-title"),o=$(".modal-footer");t.empty(),a.empty(),o.empty();let i=$("<h1>"+e.name+"</h1>"),n=$("<img>");n.addClass("modal-img"),n.addClass("img-fluid"),n.attr("src",e.imageUrl),n.attr("alt",`Image of ${e.name}`);let p=$("<p>height: "+e.height+"</p>"),l=$("<p>types: "+e.types+"</p>"),s=$("<p>weight: "+e.weight+"</p>"),d=$("<p>abilities: "+e.abilities+"</p>"),r=$("<p>"+e.description+"</p>");a.append(i),t.append(n),t.append(p),t.append(s),t.append(l),t.append(d),o.append(r)};return{add:t,getAll:()=>e,addListItem:e=>{let t=document.createElement("li"),o=document.createElement("button");o.innerText=e.name,o.classList.add("button-class","btn","btn-outline-dark"),o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#pokeModal"),t.appendChild(o),t.classList.add("group-list-item"),pokeList.appendChild(t),o.addEventListener("click",()=>{a(e)})},loadList:()=>fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(e=>e.json()).then(e=>{e.results.forEach(e=>{let a={name:e.name,detailsUrl:e.url};t(a)})}).catch(e=>{console.error(e)}),loadPokemonData:o}})(),input=document.getElementById("search-pokemon");pokemonData=[],pokemonRep.loadList().then(()=>{pokemonData=pokemonRep.getAll(),pokemonData.forEach(e=>pokemonRep.addListItem(e)),input.addEventListener("keyup",()=>{pokeList.innerHTML="",keyword=input.value.toLowerCase(),pokemonData.filter(e=>(pokee=e.name.toLowerCase(),pokee.indexOf(keyword)>-1)).forEach(e=>pokemonRep.addListItem(e))})});